<!DOCTYPE html>
<html>
<head>
    <title>GasBack Lite</title>
    <script src="https://terminal.jup.ag/main-v3.js"></script>
</head>
<body>
    <h1>GasBack Lite</h1>
    
    <div>
        <button onclick="showTab('swap')">TOKENS SWAP</button>
        <button onclick="showTab('whale')">WHALE TRACKER</button>
        <button onclick="showTab('how')">HOW IT WORKS</button>
    </div>
    
    <div id="swap-tab">
        <h2>Token Swap</h2>
        <div id="jupiter-terminal"></div>
    </div>
    
    <div id="whale-tab" style="display:none;">
        <h2>Whale Tracker</h2>
        <p>Whale tracking information...</p>
    </div>
    
    <div id="how-tab" style="display:none;">
        <h2>How GasBack Works</h2>
        <p>1. Swap Tokens: Use our integrated Jupiter swap interface to exchange any SPL tokens on Solana. Up to 80% fee cashback on your wallet.</p>
        <p>2. Earn more with GASD token: blablabla</p>
    </div>

    <script>
        // Simple tab switching
        function showTab(tabName) {
            // Hide all tabs
            document.getElementById('swap-tab').style.display = 'none';
            document.getElementById('whale-tab').style.display = 'none';
            document.getElementById('how-tab').style.display = 'none';
            
            // Show selected tab
            document.getElementById(tabName + '-tab').style.display = 'block';
        }
        
        // Jupiter initialization
        function initJupiter() {
            // Check if Jupiter is available
            if (typeof window.Jupiter !== 'undefined') {
                try {
                    // Initialize Jupiter with proper configuration
                    window.Jupiter.init({
                        displayMode: "integrated",
                        integrated: true,
                        endpoint: "https://api.mainnet-beta.solana.com",
                        defaultInputMint: "So11111111111111111111111111111111111111112", // SOL
                        defaultOutputMint: "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v", // USDC
                        defaultInputAmount: "1000000", // 1 SOL in lamports
                        slippageBps: 100, // 1%
                        platformFeeAndAccounts: {
                            feeBps: 10, // 0.10% platform fee
                            feeAccounts: {
                                "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v": "Az9kgSbqq72dPTUKtMuFEp1qQhqi3gUobysNFNQp9K78"
                            }
                        },
                        referral: {
                            ref: "www.whtg1.com"
                        },
                        containerElement: document.getElementById("jupiter-terminal")
                    });
                } catch (error) {
                    console.error("Error initializing Jupiter:", error);
                    document.getElementById("jupiter-terminal").innerHTML = 
                        "<div style='padding: 20px; color: red;'>" +
                        "<h3>Jupiter Initialization Error</h3>" +
                        "<p>" + error.message + "</p>" +
                        "</div>";
                }
            } else {
                // Retry after a short delay
                setTimeout(initJupiter, 1000);
            }
        }
        
        // Initialize Jupiter when page loads
        window.addEventListener('load', function() {
            // Show swap tab by default
            showTab('swap');
            // Initialize Jupiter
            setTimeout(initJupiter, 1000);
        });
    </script>
</body>
</html>